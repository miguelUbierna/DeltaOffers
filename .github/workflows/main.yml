name: Actualizar Base de Datos

on:
  schedule:
    - cron: '*/5 * * * *'

jobs:
  actualizar_bd:
    runs-on: windows-latest

    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-python@v5
        with:
          python-version: '3.12'

      - name: Instalo virtualenv
        run: python -m pip install virtualenv

      - name: Creo el entorno virtual
        run: python -m virtualenv env

      - name: Lo activo e instalo las dependencias
        run: |
          .\env\Scripts\activate
          pip install -r DataCollections\requirements.txt
        shell: cmd

      - name: Verificar instalaci√≥n de dependencias
        run: |
          .\env\Scripts\activate
          pip list
        shell: cmd

      - name: Compruebo las dependencias instaladas
        run: |
          .\env\Scripts\activate
          where python
          where pip
        shell: cmd

      - name: Ejecuto el script data.py
        run: |
          .\env\Scripts\activate
          python DataCollections\Data\data.py
        shell: cmd

